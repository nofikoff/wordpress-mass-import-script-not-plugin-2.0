# wordpress-mass-import news

Парсер товаров с сайта поставщика и импортирует в наш Wordpress

Изначально написал скрипт на Nodejs
Но все преимущества многопоточности JS были напрасны, в отличии от olx.ua (выдерживает десятки параллельных обращений при сканировании) этот сайт падал при попытке параллельного подключения к нему - 502 ошибка сервера

# Переписал скрипт на PHP
- данные (имя, описание, картинка) парсятся регулярными выражениями;
- обработка в один поток последовательно;
- 1800 позиций за 30 минут (пришлось в настройках локального OpenServer Поставить max time execution 9000 иначе скрипт обрывался через минуту);

# Интеграция с Wordpress 
осуществляется через подключение  ./wp-load.php в корне вордпресса, соответственно наш парсер должен находится в своей поддиректории корня вордпресса
Дальше для создания продукта используются штатные классы Woocommerce
- Товар создается типа Simple (без дополнительных атрибутов);
- Картинка автоматичнски подтягивается и аплоудится в вордпресс из внешнего источника;

# Вишенка на торте
- Да я знаю что есть стандартные скрипты импорта товаров из CSS;
- В данном примере скрипт импорта на лету определяет (по фрагменту названия в товаре) - одну из сотен подходящих категорий Wordpress (тоже по названию) - сравнивает и привязывает товар к нужной ветки дерева категорий

Категорий пару сотен, привязывать в ручную не удобно. 
См результат здесь http://meganom-new.nx-p.com/product-category/





